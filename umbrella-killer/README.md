# Umbrella Killer  
### *"There's a hole in your umbrella!"*

---
*Cisco Umbrella is a suite of internet security products. This tool specifically targets "Security Connector", which is a control software for MDM devices. This tool effectively disables "Security Connector", which removes the DNS Proxy, Website and Content Filter, and a few other minor features.*  

**This tool is a temporary exploit. As soon as the device disconnects, "Security Connector" will re-enable itself and the device will return to its intended state.**

---
### Requirements  
- Internet connection
- Docker engine
- Docker-compose
- Sudo permission
- Port 53 and any other web port
  
### Exploited Device
The device must be able to modify its DNS settings, on every network it goes on. (Cellular service is an exception, but it will defeat the exploit.)

---
# Installation Instructions

On the docker host:
- Download [docker-compose.yml](https://github.com/nevadex/exploits1/blob/main/umbrella-killer/docker-compose.yml) from the repo into a new directory.
- Edit `docker-compose.yml` and verify lines 11, 13, and 14 are set properly
- On the terminal, run `docker-compose up -d`. This should result in no errors.
- Running `sudo docker stats` should show container `umbrella-killer` live.
- Allow port 53 and the port on line 11 through the firewall.

On your computer:
- Download [umbrella-killer.tar.gz](https://github.com/nevadex/exploits1/blob/main/umbrella-killer/umbrella-killer.tar.gz)
- In a web browser, open the docker host's IP on the port specified on line 11 of `docker-compose.yml`. Example: `192.168.0.69:8000`
- Click [Did you mean to go to the admin panel?]()
- Login with the password set on line 14
- Open Settings>Teleporter>Restore
- Restore from the `umbrella-killer.tar.gz` file
- Open Settings>DNS>Interface Settings
- Select "Permit All Origins"
- Allow port 53 and optionally the port on line 11 through the NAT/router firewall

> **CAUTION!!** This tool creates a public DNS server on your network. Please be sure to properly firewall the docker host.

On the exploited device:
- Set the DNS on every network the device uses to the docker host.
- After 24-72 hours of being isolated on the docker host dns, "Security Connector" should off itself.
